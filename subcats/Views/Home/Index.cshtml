@{
    ViewData["Title"] = "Inicio";
    var tematicaService = new subcats.customClass.TematicaService();
    var tematicaActiva = tematicaService.ObtenerTematicaActiva();
    string imagenBase64 = null;
    
    if (tematicaActiva != null && tematicaActiva.Imagen != null)
    {
        imagenBase64 = Convert.ToBase64String(tematicaActiva.Imagen);
    }
}

<div class="hero-wrapper">
    @if (imagenBase64 != null)
    {
        <div class="fullscreen-hero">
            <img src="data:image/jpeg;base64,@imagenBase64" alt="@tematicaActiva.Nombre">
            <div class="hero-text text-center">
                <h1 class="display-3 text-white fw-bold">@tematicaActiva.Nombre</h1>
                <p class="text-white fs-4">@(string.IsNullOrEmpty(tematicaActiva.Descripcion) ? "Bienvenido a nuestra tienda" : tematicaActiva.Descripcion)</p>
                <a href="#categorias" class="btn btn-naranja btn-lg mt-3">Ver Productos</a>
            </div>
        </div>
    }
    else
    {
        <div class="fullscreen-hero">
            <img src="https://images.unsplash.com/photo-1583394838336-acd977736f90?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2048&q=80" alt="Joyería Tienda">
            <div class="hero-text text-center">
                <h1 class="display-3 text-white fw-bold">Bienvenido a Joyería</h1>
                <p class="text-white fs-4">Tu tienda de confianza</p>
                <a href="#categorias" class="btn btn-naranja btn-lg mt-3">Ver Productos</a>
            </div>
        </div>
    }
</div>

<div id="categorias" class="container mt-5">
    <div class="row">
        <div class="col-12 text-center mb-4">
            <h2 class="display-5 text-naranja">Nuestras Categorías</h2>
            <p class="lead">Explora nuestra amplia variedad de productos</p>
        </div>
        
        @{
            var categoriaService = new subcats.customClass.CategoriaService();
            var categorias = categoriaService.ObtenerTodasCategorias();
        }
        
        @foreach (var categoria in categorias)
        {
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow-sm categoria-card" data-id="@categoria.Id">
                    <div class="card-body text-center">
                        <i class="bi bi-tag-fill fs-1"></i>
                        <h3 class="card-title mt-3">@categoria.Nombre</h3>
                        <p class="card-text text-muted">
                            @(string.IsNullOrEmpty(categoria.Descripcion) ? "Ver productos" : categoria.Descripcion)
                        </p>
                        <a href="/Productos/Categoria/@categoria.Id" class="btn btn-outline-naranja mt-2">Explorar</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<style>
    body, html {
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        width: 100%;
        height: 100%;
    }
    
    :root {
        --color-naranja: #5A7DC4;
        --color-naranja-oscuro: #4867A6;
        --color-naranja-claro: #7C97D3;
        --color-naranja-palido: #BFD0F2;
    }
    
    .hero-wrapper {
        position: relative;
        width: 100%;
        height: 100vh;
        overflow: hidden;
        margin: 0;
        padding: 0;
    }
    
    .fullscreen-hero {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
    }
    
    .fullscreen-hero img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
        position: absolute;
        top: 0;
        left: 0;
    }
    
    .hero-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        background-color: rgba(0, 0, 0, 0.4);
        padding: 2rem;
        border-radius: 10px;
        width: 80%;
        max-width: 800px;
        z-index: 2;
    }
    
    .categoria-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
        border-color: var(--color-naranja-claro);
    }
    
    .categoria-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(255, 120, 26, 0.2) !important;
        border-color: var(--color-naranja);
    }
    
    .categoria-card .card-title {
        color: var(--color-naranja-oscuro);
    }
    
    .categoria-card .bi {
        color: var(--color-naranja);
    }
    
    /* Color personalizado naranja */
    .text-naranja {
        color: var(--color-naranja) !important;
    }
    
    .bg-naranja {
        background-color: var(--color-naranja) !important;
    }
    
    .btn-naranja {
        background-color: var(--color-naranja);
        border-color: var(--color-naranja);
        color: white;
    }
    
    .btn-naranja:hover, 
    .btn-naranja:active, 
    .btn-naranja:focus {
        background-color: var(--color-naranja-oscuro) !important;
        border-color: var(--color-naranja-oscuro) !important;
        color: white !important;
    }
    
    .btn-outline-naranja {
        color: var(--color-naranja);
        border-color: var(--color-naranja);
        background-color: transparent;
    }
    
    .btn-outline-naranja:hover, 
    .btn-outline-naranja:active, 
    .btn-outline-naranja:focus {
        background-color: var(--color-naranja) !important;
        border-color: var(--color-naranja) !important;
        color: white !important;
    }
    
    /* Contenedor principal */
    .container {
        max-width: 1320px;
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto;
    }
    
    #categorias {
        margin-top: 5rem !important;
        z-index: 10;
        position: relative;
        background-color: white;
        padding-top: 3rem;
        padding-bottom: 3rem;
        border-radius: 15px 15px 0 0;
        box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);
    }
    
    /* Responsive */
    @@media (max-width: 768px) {
        .fullscreen-hero {
            width: 100%;
            left: 0;
            right: 0;
            margin-left: 0;
            margin-right: 0;
        }
        
        #categorias {
            border-radius: 10px 10px 0 0;
        }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Hacer que las tarjetas sean clickeables
        document.querySelectorAll('.categoria-card').forEach(card => {
            card.addEventListener('click', function() {
                const categoriaId = this.getAttribute('data-id');
                window.location.href = `/Productos/Categoria/${categoriaId}`;
            });
        });
    });
</script>
